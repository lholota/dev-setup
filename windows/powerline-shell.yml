- name: "Download Powerline fonts"
  win_get_url:
    url: https://github.com/powerline/fonts/archive/master.zip
    dest: "%TEMP%\\PowerlineFonts.zip"
    
- name: "Extract Powerline fonts"
  win_unzip:
    src: "%TEMP%\\PowerlineFonts.zip"
    dest: "%TEMP%"

- name: "Import Powerline fonts"
  ansible.windows.win_command: "powershell -"
  args:
    stdin: "Set-ExecutionPolicy ByPass -Scope Process -Force; .\\install.ps1"
    chdir: "%TEMP%\\fonts-master"

- name: "Find Windows Terminal AppData directory"
  ansible.windows.win_find:
    paths: "%LOCALAPPDATA%\\Packages"
    patterns: [ 'Microsoft.WindowsTerminal_*' ]
    file_type: directory
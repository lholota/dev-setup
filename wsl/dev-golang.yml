- name: Download golang
  get_url:
    url: "https://dl.google.com/go/go{{ golang_version | default('1.16') }}.linux-amd64.tar.gz"
    dest: "/tmp/go{{ golang_version | default('1.16') }}.linux-amd64.tar.gz"

- name: Extract golang
  unarchive:
    src: "/tmp/go{{ golang_version | default('1.16') }}.linux-amd64.tar.gz"
    dest: /usr/local

- name: Add go to PATH
  lineinfile:
    path: ~/.profile
    line: "export PATH=$PATH:/usr/local/go/bin"

- name: Create ~/go directory
  file:
    path: ~/go
    state: directory